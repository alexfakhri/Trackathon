<% content_for :title do %>
  Trackathon dashboard
<% end %>


<% @hackathon = Hackathon.last %>
<% @name = Hackathon.last.name %>
<% @end_time = Hackathon.last.end_time %>


<div class="gridster">
  <ul>
    <li data-row="1" data-col="1" data-sizex="2" data-sizey="1">
      <div id="welcome-widget" data-id="welcome" data-view="Text" data-title="Hello <%= @hackathon.name.capitalize %>" data-text="This is your hackathon dashboard." data-moreinfo="Protip: You can drag the widgets around!"></div>
    </li>

    <!-- <li data-row="1" data-col="1" data-sizex="1" data-sizey="1">
      <div id="clock-widget" data-view="Clock"></div>
      <i class="icon-time icon-background"></i>
    </li> -->

    <li data-row="2" data-col="3" data-sizex="1" data-sizey="1">
      <div id="countdown-widget" data-view="Countdown" data-title="Time remaining" data-end="<%= @end_time %>"></div>
      <i class="icon-time icon-background"></i>
    </li>

    <% if Hackathon.last.projects.any? %>
      <% @projects = Hackathon.last.projects.all %>
      <% @projects.each do |project| %>
        <li id="project_link" data-row="2" data-col="1" data-sizex="1" data-sizey="1" onclick='location.href="/projects/<%= project.id %>";'>
            <div id="project-progress-widget<%= project.id %>" data-id="project<%= project.id %>" data-view="Project" data-title="<%= project.name %>" data-min="0" data-max="100"></div>
        </li>
      <% end %>
    <% end %>

    <li data-row="2" data-col="2" data-sizex="1" data-sizey="1">
      <a id="add" href="/hackathons/<%= @hackathon.id %>/projects/new">
        <div id="new-project-widget" data-id="add" data-view="Add" data-title="Add a New Project"></div>
      </a>
    </li>

  </ul>

</div>
